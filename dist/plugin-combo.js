(function(k){function s(a){for(var b={__KEYS:[]},d=0,e=a.length;d<e;d++)for(var g=a[d].replace("://","__").split("/"),c=b,f=0,h=g.length;f<h;f++){var l=g[f];c[l]||(c[l]={__KEYS:[]},c.__KEYS.push(l));c=c[l]}a=[];d=b.__KEYS;e=0;for(g=d.length;e<g;e++){c=f=d[e];f=b[f];for(h=f.__KEYS;1===h.length;)c+="/"+h[0],f=f[h[0]],h=f.__KEYS;h.length&&a.push([c.replace("__","://"),t(f)])}return a}function t(a){for(var b=[],d=a.__KEYS,e=0,g=d.length;e<g;e++){var c=d[e],f=t(a[c]),h=f.length;if(h)for(var l=0;l<h;l++)b.push(c+
"/"+f[l]);else b.push(c)}return b}function u(a){for(var b=0,d=a.length;b<d;b++){for(var e=a[b],g=e[0]+"/",c=e[1],e=[],f={},h=0,l=c.length;h<l;h++){var k=c[h],j;j=k;var m=j.lastIndexOf(".");(j=0<=m?j.substring(m):"")&&(f[j]||(f[j]=[])).push(k)}c=void 0;for(c in f)f.hasOwnProperty(c)&&e.push(f[c]);f=0;for(c=e.length;f<c;f++)p(g,e[f])}return n}function p(a,b){var d=a+m[0]+b.join(m[1]),e=d.length>q;if(1<b.length&&e){a:{for(var d=q-(a+m[0]).length,e=m[1],g=b[0],c=1,f=b.length;c<f;c++)if(g+=e+b[c],g.length>
d){d=[b.splice(0,c),b];break a}d=void 0}p(a,d[0]);p(a,d[1])}else{if(e)throw Error("The combo url is too long: "+d);d=n[d]={};e=0;for(g=b.length;e<g;e++)d[a+b[e]]=!0}}function v(a){var b=j.comboSyntax||["??",","],d=b[0],b=b[1];return d&&0<a.indexOf(d)||b&&0<a.indexOf(b)}function r(a){for(var b in n)if(n.hasOwnProperty(b)&&n[b][a])return b}var w=k.Module,y=w.STATUS.FETCHING,j=k.data,n={},m=["??",","],q=2E3;k.on("load",function(a){var b=a.length;if(!(2>b)){j.comboSyntax&&(m=j.comboSyntax);j.comboMaxLength&&
(q=j.comboMaxLength);for(var d=j.comboExcludes,e=[],g=0;g<b;g++){var c=a[g];r(c)||w.get(c).status<y&&((!d||!d.test(c))&&!v(c))&&e.push(c)}1<e.length&&u(s(e))}});k.on("fetch",function(a){a.requestUri=r(a.uri)||a.uri});k.on("requested",function(a){(a=r(a.requestUri))&&v(a)&&delete n[a]});if(j.test){var x=k.test||(k.test={});x.uris2paths=s;x.paths2hash=u}define(k.data.dir+"plugin-combo",[],{})})(seajs);
