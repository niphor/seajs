(function(l){function m(d){for(var e={__KEYS:[]},f=0,c=d.length;f<c;f++)for(var h=d[f].replace("://","__").split("/"),b=e,a=0,g=h.length;a<g;a++){var j=h[a];b[j]||(b[j]={__KEYS:[]},b.__KEYS.push(j));b=b[j]}d=[];f=e.__KEYS;c=0;for(h=f.length;c<h;c++){b=a=f[c];a=e[a];for(g=a.__KEYS;1===g.length;)b+="/"+g[0],a=a[g[0]],g=a.__KEYS;g.length&&d.push([b.replace("__","://"),q(a)])}return d}function q(d){for(var e=[],f=d.__KEYS,c=0,h=f.length;c<h;c++){var b=f[c],a=q(d[b]),g=a.length;if(g)for(var j=0;j<g;j++)e.push(b+
"/"+a[j]);else e.push(b)}return e}function r(d){for(var e=0,f=d.length;e<f;e++){for(var c=d[e],h=c[0]+"/",b=c[1],c=[],a={},g=0,j=b.length;g<j;g++){var l=b[g],k;k=l;var m=k.lastIndexOf(".");(k=0<=m?k.substring(m):"")&&(a[k]||(a[k]=[])).push(l)}b=void 0;for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);a=0;for(b=c.length;a<b;a++)p(h,c[a])}return n}function p(d,e){var f=k.comboSyntax||["??",","],c=k.comboMaxLength||v,f=d+f[0]+e.join(f[1]),c=f.length>c;if(1<e.length&&c)p(d,e.splice(0,Math.ceil(e.length/2))),
p(d,e);else{if(c)throw Error("The combo url is too long: "+f);for(var c=0,h=e.length;c<h;c++)n[d+e[c]]=f}}var s=l.Module,w=s.STATUS.FETCHING,t=l.cache,k=l.data,n=k.comboHash={},v=2E3;l.on("load",function(d){var e=d.length;if(!(2>e)){for(var f=[],c=k.comboExcludes,h=0;h<e;h++){var b=d[h];if(!n[b]){var a;if(a=(t[b]||(t[b]=new s(b))).status<w)if(a=!c||!c.test(b)){a=b;var g=k.comboSyntax||["??",","],j=g[0],g=g[1];a=!(j&&0<a.indexOf(j)||g&&0<a.indexOf(g))}a&&f.push(b)}}1<f.length&&r(m(f))}});l.on("fetch",
function(d){d.requestUri=n[d.uri]||d.uri});if(k.test){var u=l.test||(l.test={});u.uris2paths=m;u.paths2hash=r}define(l.data.dir+"plugin-combo",[],{})})(seajs);
